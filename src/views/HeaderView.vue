<script setup>
import {RouterLink, RouterView, useRoute, useRouter} from 'vue-router';
import { ref, computed, onMounted  } from 'vue';

// Route actuelle
const router = useRouter();
const route = useRoute();

// Heure de départ à partir de laquelle l'horloge commencera à avancer
const startTime = new Date();
startTime.setHours(10, 32, 0, 0);

// Formatage de l'heure
const formattedTime = ref(getFormattedTime(startTime));

// Mettre à jour l'heure chaque seconde
setInterval(() => {
  startTime.setSeconds(startTime.getSeconds() + 1);
  formattedTime.value = getFormattedTime(startTime);
}, 1000);

// Fonction pour formater l'heure
function getFormattedTime(time) {
  const hours = time.getHours() < 10 ? time.getHours().toString().padStart(2, ' ') : time.getHours();
  const minutes = String(time.getMinutes()).padStart(2, '0');
  const seconds = String(time.getSeconds()).padStart(2, '0');
  return `${hours}:${minutes}:${seconds}`;
}

// Couleur de fond
const changeColor = ref('white');

const changeColorFunc= () => {
  switch(route.path) {
    case '/':
      changeColor.value = 'white';
      break;
    case '/camera':
      changeColor.value = 'white';
      break;
    default:
      changeColor.value = 'black';
  }
};

// Écouter les changements de route
router.afterEach(() => {
  console.log('Changement de page. Nouvelle route :', route.path);
  changeColorFunc();
  window.scrollTo(0, 0);
});



</script>

<template>
  <header>
    <nav>
      <p :style="{ color: changeColor }"> {{ formattedTime }} </p>
      <div class="HeaderIcon">
        <svg :style="{ 'fill': changeColor }" width="19" height="10" viewBox="0 0 19 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_41_27)">
            <path :style="{ 'fill': changeColor }" d="M19.0004 5.32125C19.0004 6.7588 19.0004 8.19636 19.0004 9.63391C19.0004 9.90226 18.8605 9.99641 18.436 9.99776C17.4418 10.0008 16.4477 10.0004 15.4535 9.99776C15.0384 9.99675 14.8927 9.8999 14.8922 9.62853C14.8896 7.97274 14.8901 6.31695 14.889 4.66149C14.888 3.4869 14.8875 2.31231 14.8838 1.13738C14.8828 0.838097 14.9692 0.559329 15.3004 0.332347C15.6128 0.119152 15.9933 0.0011209 16.455 0.00044836C16.7689 0.00044836 17.0828 -0.00056045 17.3968 0.00044836C18.3223 0.00313852 18.9968 0.434573 18.9968 1.02506C18.9968 2.45724 18.9968 3.88908 18.9968 5.32125C18.9978 5.32125 18.9989 5.32125 18.9999 5.32125H19.0004ZM18.3695 5.13697C18.3695 3.76163 18.37 2.38628 18.3695 1.01094C18.3695 0.664582 17.9701 0.40599 17.4355 0.4033C17.1043 0.401619 16.7694 0.383796 16.4435 0.410025C16.2323 0.426839 16.0095 0.488376 15.8355 0.568409C15.5468 0.701235 15.5179 0.915103 15.5185 1.12796C15.5211 2.36342 15.5237 3.59887 15.5232 4.83433C15.5232 6.28769 15.5195 7.74139 15.519 9.19475C15.519 9.50848 15.6511 9.59289 16.139 9.59423C16.6966 9.59558 17.2542 9.59659 17.8124 9.59323C18.2421 9.59087 18.3705 9.50378 18.3705 9.22938C18.3705 7.86513 18.3705 6.50089 18.3705 5.13664L18.3695 5.13697Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M9.93384 5.76549C9.93384 4.52936 9.94013 3.2929 9.93069 2.05677C9.92755 1.61054 10.1686 1.26216 10.8001 1.04964C10.9212 1.00895 11.0596 0.970281 11.1927 0.965909C11.8908 0.943715 12.6093 0.843171 13.2649 1.08024C13.7413 1.25241 14.0227 1.52647 14.0264 1.88594C14.0395 3.20042 14.0426 4.5149 14.0452 5.82905C14.0479 7.08771 14.0452 8.34603 14.0437 9.60469C14.0437 9.9154 13.9116 9.99812 13.4179 9.99846C12.4499 9.9988 11.482 9.99913 10.514 9.99846C10.0785 9.99812 9.94013 9.908 9.94013 9.6252C9.9396 8.33863 9.94013 7.05206 9.94013 5.76549C9.93803 5.76549 9.93594 5.76549 9.93384 5.76549ZM13.408 5.58895C13.408 5.48841 13.408 5.38752 13.408 5.28698C13.408 4.19612 13.4095 3.1056 13.4069 2.01474C13.4059 1.57254 13.0448 1.34287 12.3609 1.34253C12.1255 1.34253 11.8902 1.34253 11.6544 1.34253C10.9217 1.34253 10.5675 1.56884 10.5669 2.04164C10.5659 4.43588 10.5659 6.82979 10.5669 9.22403C10.5669 9.4991 10.6932 9.58586 11.1209 9.58922C11.6701 9.59359 12.2194 9.58821 12.7686 9.59157C13.2832 9.5946 13.4069 9.52163 13.4074 9.19646C13.408 7.99395 13.4074 6.79145 13.408 5.58861V5.58895Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M4.9743 6.42863C4.9743 5.36098 4.97325 4.29332 4.9743 3.22566C4.97535 2.66375 5.66713 2.22055 6.54811 2.21584C6.87042 2.21416 7.19273 2.21483 7.51504 2.21618C8.32317 2.21988 9.01024 2.60053 9.05322 3.11671C9.10143 3.69072 9.09147 4.26709 9.09305 4.84245C9.09724 6.37954 9.092 7.91663 9.09514 9.45372C9.09619 9.95106 9.02806 9.99915 8.25137 9.99881C7.37983 9.99881 6.50881 9.99881 5.63726 9.99881C5.09274 9.99881 4.97168 9.92282 4.97168 9.58117C4.97168 8.53032 4.97168 7.47948 4.97168 6.42863H4.97378H4.9743ZM5.60058 6.24402C5.60058 6.61324 5.60058 6.98247 5.60058 7.35169C5.60058 7.9896 5.599 8.62717 5.6011 9.26507C5.60162 9.46347 5.72111 9.57679 5.98735 9.58117C6.67546 9.59193 7.36463 9.58991 8.05275 9.58318C8.27915 9.58083 8.42484 9.49609 8.44109 9.34107C8.4479 9.27415 8.45681 9.20723 8.45681 9.14031C8.45943 7.61331 8.4631 6.08631 8.46258 4.55897C8.46258 4.10064 8.47149 3.64129 8.43637 3.18363C8.40912 2.82987 8.0213 2.62172 7.4642 2.61869C7.19378 2.61701 6.92335 2.61802 6.65345 2.61869C5.97949 2.6197 5.60162 2.8598 5.6011 3.29022C5.60005 4.27482 5.6011 5.25942 5.6011 6.24402H5.60058Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M4.13448 7.01106C4.13448 7.87796 4.13448 8.74453 4.13448 9.61143C4.13448 9.89457 3.97935 9.99781 3.54174 9.99848C2.55647 10.0002 1.57173 9.99983 0.586455 9.99848C0.156709 9.99781 0.00315402 9.8976 0.00315402 9.62354C0.00262994 7.88402 0.00787074 6.14483 9.54048e-06 4.40564C-0.00313494 3.74453 0.771455 3.28519 1.67969 3.31915C2.07851 3.33428 2.49201 3.29426 2.87669 3.34639C3.67958 3.45467 4.12819 3.84743 4.13238 4.39387C4.13972 5.26615 4.13448 6.13877 4.13395 7.01106H4.13448ZM0.630478 6.8093H0.633622C0.633622 7.60895 0.633098 8.4086 0.633622 9.20858C0.633622 9.50013 0.774076 9.59126 1.22583 9.59227C1.77507 9.59328 2.32431 9.59159 2.87354 9.59092C3.37299 9.59025 3.50244 9.50618 3.50244 9.18034C3.50401 7.96102 3.50558 6.74204 3.50611 5.52273C3.50611 5.13669 3.51659 4.75065 3.49929 4.36529C3.48095 3.95403 3.10885 3.72772 2.47629 3.72402C2.16236 3.722 1.84792 3.71729 1.53504 3.72873C1.39354 3.73411 1.24313 3.76134 1.11787 3.80405C0.731101 3.93553 0.630478 4.16756 0.630478 4.42716C0.62943 5.22143 0.630478 6.01536 0.630478 6.80963V6.8093Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M18.3686 5.13729C18.3686 6.50154 18.3686 7.86579 18.3686 9.23004C18.3686 9.50477 18.2402 9.59153 17.8105 9.59388C17.2529 9.59725 16.6953 9.59624 16.1371 9.59489C15.6492 9.59355 15.5171 9.50914 15.5171 9.1954C15.5171 7.74204 15.5213 6.28835 15.5213 4.83499C15.5213 3.59953 15.5192 2.36407 15.5166 1.12862C15.5166 0.915759 15.5449 0.701891 15.8337 0.569065C16.0082 0.489032 16.2304 0.427495 16.4416 0.410682C16.7676 0.384452 17.1025 0.402275 17.4337 0.403956C17.9682 0.40631 18.3671 0.664902 18.3676 1.0116C18.3686 2.38694 18.3676 3.76229 18.3676 5.13763L18.3686 5.13729Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M13.4072 5.58886C13.4072 6.79136 13.4072 7.99386 13.4072 9.1967C13.4072 9.52153 13.2829 9.59484 12.7683 9.59181C12.2191 9.58845 11.6698 9.59383 11.1206 9.58946C10.6929 9.5861 10.5666 9.49934 10.5666 9.22427C10.5666 6.83003 10.5661 4.43612 10.5666 2.04188C10.5666 1.56908 10.9214 1.34277 11.6541 1.34277C11.8894 1.34277 12.1247 1.34277 12.3606 1.34277C13.0445 1.34277 13.4056 1.57245 13.4066 2.01498C13.4087 3.10584 13.4077 4.19636 13.4077 5.28722C13.4077 5.38777 13.4077 5.48865 13.4077 5.58919L13.4072 5.58886Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M5.6007 6.24417C5.6007 5.25957 5.60018 4.27497 5.6007 3.29037C5.6007 2.85961 5.97961 2.61952 6.65305 2.61884C6.92348 2.61851 7.1939 2.6175 7.4638 2.61884C8.0209 2.62221 8.40872 2.83002 8.43597 3.18378C8.47109 3.64144 8.46218 4.10045 8.46218 4.55912C8.4627 6.08612 8.45956 7.61313 8.45641 9.14047C8.45641 9.20738 8.4475 9.2743 8.44069 9.34122C8.42444 9.49624 8.27875 9.58098 8.05235 9.58333C7.3637 9.59006 6.67506 9.59208 5.98695 9.58132C5.72071 9.57728 5.60122 9.46362 5.6007 9.26522C5.5986 8.62732 5.60018 7.98975 5.60018 7.35184C5.60018 6.98262 5.60018 6.6134 5.60018 6.24417H5.6007Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M0.630859 6.80901C0.630859 6.01474 0.630859 5.2208 0.630859 4.42653C0.630859 4.16693 0.732007 3.93491 1.11825 3.80343C1.24351 3.76072 1.39392 3.73348 1.53542 3.7281C1.8483 3.71667 2.16275 3.72138 2.47667 3.72339C3.10923 3.72709 3.48133 3.9534 3.49967 4.36466C3.51697 4.75036 3.50649 5.1364 3.50649 5.5221C3.50596 6.74142 3.50439 7.9604 3.50282 9.17971C3.50282 9.50556 3.37337 9.58962 2.87392 9.5903C2.32469 9.59097 1.77545 9.59265 1.22621 9.59164C0.774457 9.59097 0.634528 9.4995 0.634004 9.20796C0.632956 8.40831 0.634004 7.60866 0.634004 6.80867H0.630859V6.80901Z" fill="white"/>
          </g>
          <defs>
            <clipPath id="clip0_41_27">
              <rect width="19" height="10" fill="white"/>
            </clipPath>
          </defs>
        </svg>
        <svg width="25" height="11" viewBox="0 0 25 11" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_42_36)">
            <path :style="{ 'fill': changeColor }" d="M11.1049 10.9982C8.34087 10.9982 5.57684 10.9993 2.814 10.9982C0.994717 10.997 0.00118985 10.053 0 8.33021C0 6.40959 0 4.48897 0.00118985 2.56836C0.00237971 1.00174 1.02803 0.00828143 2.68431 0.00603378C8.33016 -0.000709175 13.976 -0.000709175 19.6219 0.00603378C21.2532 0.00828143 22.2717 0.988257 22.274 2.53015C22.2788 4.50695 22.2764 6.48264 22.274 8.45945C22.2729 10.0238 21.246 10.9937 19.5719 10.997C16.7484 11.0027 13.926 10.9982 11.1025 10.9982H11.1049ZM11.1977 1.35575C8.41464 1.35575 5.63276 1.3535 2.8497 1.35687C1.78835 1.358 1.4421 1.69627 1.44091 2.70883C1.44091 4.61035 1.43734 6.51186 1.4421 8.41225C1.44448 9.26972 1.8288 9.64171 2.74023 9.64171C8.34444 9.64621 13.9498 9.64621 19.554 9.64171C20.4571 9.64171 20.8403 9.26186 20.8415 8.40438C20.845 6.52197 20.8427 4.63956 20.8415 2.75603C20.8415 1.66817 20.5143 1.35687 19.366 1.35575C16.6425 1.35462 13.9189 1.35575 11.1953 1.35575H11.1977Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M23.3486 7.99312V3.04492C24.1732 3.12921 24.8835 4.12604 24.9906 5.3364C25.0906 6.46809 24.3196 7.7515 23.3486 7.99312Z" fill="white"/>
            <path :style="{ 'fill': changeColor }" d="M11.0726 8.62828C8.54778 8.62828 6.02172 8.62941 3.49685 8.62828C2.64492 8.62828 2.50452 8.49005 2.50333 7.6809C2.50214 6.20869 2.50095 4.73648 2.50333 3.26427C2.50452 2.52254 2.65563 2.3742 3.43617 2.3742C8.58585 2.37195 13.7355 2.37083 18.884 2.3742C19.6289 2.3742 19.7812 2.52591 19.7824 3.23505C19.7859 4.72636 19.7847 6.21656 19.7824 7.70787C19.7824 8.49118 19.6455 8.62604 18.8257 8.62716C16.2414 8.63053 13.657 8.62828 11.0715 8.62828H11.0726Z" fill="white"/>
          </g>
          <defs>
            <clipPath id="clip0_42_36">
              <rect width="25" height="11" fill="white"/>
            </clipPath>
          </defs>
        </svg>

      </div>
    </nav>
  </header>
  <footer>
    <RouterLink to="/"><span :style="{ 'background-color': changeColor }"></span></RouterLink>
  </footer>
</template>

<style scoped lang="scss">
header{
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  height: 35px;
  width: calc(100% - 40px);
  padding: 0 20px;
  nav{
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    p{
      color: white;
    }
    .HeaderIcon{
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
  }
}
footer{
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 25px;
  display: flex;
  align-items: center;
  justify-content: center;
  a{
    span{
      display: inline-block;
      width: 155px;
      height: 6px;
      border-radius: 5px;
      background-color: white;
    }
  }
}
</style>